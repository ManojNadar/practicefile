<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
  </head>

  <style>
    body {
      width: 100%;
    }
    h3 {
      background-color: yellow;
      height: 50px;
      padding: 100px;
    }

    span {
      font-weight: bolder;
      font-size: 3em;
    }

    button {
      width: 50%;
      height: 100px;
    }
  </style>

  <script src="./home.js"></script>
  <body>
    <h3>Welcome <span id="displayUser"></span></h3>
    <!-- <button id="logut_btn" onclick="logout(event)">Logout</button> -->
    <div id="fetchLogout"></div>

    <script>
      window.onload = () => {
        let test_currentUser = JSON.parse(localStorage.getItem("currentUser"));

        if (test_currentUser) {
          let displayUser = document.getElementById("displayUser");
          displayUser.innerHTML = test_currentUser.userName;
          let logoutDiv = document.getElementById("fetchLogout");
          let logoutButtonStructure = `<button onclick='logoutTest()'>Logout</button>`;
          logoutDiv.innerHTML = logoutButtonStructure;
        } else {
          window.location.href = `./login.html`;
          // console.log("test");
          let logoutDiv = document.getElementById("fetchLogout");
          let loginButtonStructure = `<button onclick='redirectLogin()'>Login</button>`;
          logoutDiv.innerHTML = loginButtonStructure;
        }
      };

      function logoutTest() {
        localStorage.removeItem("currentUser");
        window.location.reload();
        alert("logged out succesfuly");
      }

      function redirectLogin() {
        window.location.href = `./login.html`;
      }
    </script>
  </body>
</html>
